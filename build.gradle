/**
 * Copyright (C) 2014 Couchbase, Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALING
 * IN THE SOFTWARE.
 */

subprojects {
	apply plugin: 'java'

	group = 'com.couchbase.client'
	version = '2.0.0-SNAPSHOT'
	sourceCompatibility = JavaVersion.VERSION_1_6
	targetCompatibility = JavaVersion.VERSION_1_6

    repositories {
    	//mavenLocal()
        mavenCentral()
        maven { url 'http://repo.spring.io/libs-snapshot' }
        maven { url 'https://oss.sonatype.org/content/repositories/snapshots' }
    }

	sourceSets {
        main { java.srcDirs = ['src/main/java'] }
        test { java.srcDirs = ['src/test/java'] }
    }

}

project(':jvm-core') {
	apply plugin: 'groovy'
    apply plugin: 'checkstyle'

	sourceSets {
        test {
            groovy { srcDirs = ['src/test/unit/groovy', 'src/test/integration/groovy'] }
            java { srcDirs = ['src/test/unit/java', 'src/test/integration/java', 'src/test/performance/java'] }
        }
    }

    dependencies {
    	compile group: 'org.projectreactor', name: 'reactor-core', version: '1.1.0.BUILD-SNAPSHOT', changing: true
    	compile group: 'io.netty', name: 'netty-all', version: '5.0.0.Alpha2-SNAPSHOT', changing: true
        compile group: 'com.typesafe', name: 'config', version: '1.2.0'
        compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.3.1'

		testCompile 'org.codehaus.groovy:groovy-all:2.2.1'
		testCompile group: 'org.mockito', name: 'mockito-all', version: '1.9.5'
		testCompile group: 'org.hamcrest', name: 'hamcrest-core', version: '1.3'
		testCompile group: 'junit', name: 'junit', version: '4.11'
		testCompile group: 'org.spockframework', name: 'spock-core', version: '0.7-groovy-2.0'
		testCompile group: 'cglib', name: 'cglib-nodep', version: '2.2'
		testRuntime group: 'ch.qos.logback', name: 'logback-classic', version: '1.0.13'
    }
}

project(':java-client') {
    apply plugin: 'groovy'

    sourceSets {
        test {
            groovy { srcDirs = ['src/test/unit/groovy', 'src/test/integration/groovy'] }
            java { srcDirs = ['src/test/unit/java', 'src/test/integration/java', 'src/test/performance/java'] }
        }
    }

    dependencies {
        compile project(':jvm-core')
    }
}

/*project(':scala-client') {
    apply plugin: 'scala'

    dependencies {
        compile project(':jvm-core')
        compile group: 'org.scala-lang', name: 'scala-library', version: '2.10.3'
    }
}*/

task wrapper(type: Wrapper) {
    gradleVersion = '1.10'
}